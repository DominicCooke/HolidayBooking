MenuController=function(n,t,i,r){"use strict";function e(){f();n.$on("loggedIn",function(){n.loginStatus=i.getLoginStatus();var t=r.employeeGetById();n.role=t.RoleName.toLowerCase();n.loggedInUsername=t.FirstName+" "+t.LastName;n.navigate("EmployeeCalendar")})}function f(){t.menuGotoView(n,views.Menu,".side-bar-menu");t.gotoView(n,views.Login);n.loginStatus=i.getLoginStatus()}var u;n.logOut=function(){i.setToken("",!1);f()};n.navigate=function(i){typeof u!="undefined"&&u.$destroy();$(".bodyContainer").empty();u=n.$new();t.gotoView(u,views[i]);n.setMenuLinkActive(i);i==="EmployeeCalendar"&&r.refreshUser()};e()};MenuController.$inject=["$scope","viewService","tokenService","userService"];LoginController=function(n,t,i){"use strict";var r=this;n.login=function(){t.getLoginAuthToken(n.username,n.password).then(function(){i.setUser()},function(){$(".alert").show();$("#password").val("")})}};LoginController.$inject=["$scope","dataService","userService"];CalendarController=function(n,t,i){"use strict";n.init=function(t){n.mode=t;n.editMode=!1;n.changes=[];n.tabPendingHolidays=[]};n.initData=function(t){var r;if(n.mode=="employee"&&typeof t.length=="undefined")i.parseDateTimeToMoment(t.HolidayBookings),i.unmergeHolidayBookings(t.HolidayBookings),t.HolidayBookings=_.sortBy(t.HolidayBookings,function(n){return n.StartDate});else for(r=0;r<t.length;r++)i.parseDateTimeToMoment(t[r].HolidayBookings),i.unmergeHolidayBookings(t[r].HolidayBookings),t[r].HolidayBookings=_.sortBy(t[r].HolidayBookings,function(n){return n.StartDate})};n.submitHolidaySingleEmployee=function(){var r,u,f;n.userHolidayBookings.HolidayBookings=_.sortBy(n.userHolidayBookings.HolidayBookings,function(n){return n.StartDate});i.setAllowanceDaysOfUnmergedHolidays(n.userHolidayBookings);r=_.cloneDeep(n.userHolidayBookings);u=r.HolidayBookings;i.parseDateTimeToMoment(u);u.length>0&&(f=i.combineHolidayBookings(u),f.length>0&&(r.HolidayBookings=f));r.isVisible=!1;n.hideChanges($(".changesContainer"),function(){n.changes=[]});t.employeeUpdateHoliday(r)};n.submitTeamUsersData=function(){for(var f,e,o,s=[],u=n.teamUserHolidayBookings,r=0;r<u.length;r++)u[r].HolidayBookings=_.sortBy(u[r].HolidayBookings,function(n){return n.StartDate}),i.setAllowanceDaysOfUnmergedHolidays(u[r]),f=_.cloneDeep(u[r]),e=f.HolidayBookings,i.parseDateTimeToMoment(e),e.length>0&&(o=i.combineHolidayBookings(e),o.length>0&&(f.HolidayBookings=o)),s.push(f);t.employeesUpdateHolidays(s).then(function(){n.hideChanges($(".actionsContainer"))})}};CalendarController.$inject=["$scope","dataService","helperService"];ManagementController=function(n,t){"use strict";n.init=function(){t.userGet().then(function(t){n.data=t.data.ListOfCalendarViewModels;n.roles=t.data.ListOfIdentityRoles;n.teams=t.data.ListOfTeams})};n.deleteUser=function(i){t.userDelete(i).then(function(){t.userGet().then(function(t){n.data=t.data.ListOfCalendarViewModels})})};n.deleteTeam=function(i){t.teamDelete(i).then(function(){t.userGet().then(function(t){n.teams=t.data.ListOfTeams})})};n.userRegister=function(i){t.userRegister(i).then(function(){n.resetRegister();t.userGet().then(function(t){n.data=t.data.ListOfCalendarViewModels})})};n.teamRegister=function(i){t.teamRegister(i).then(function(){n.resetRegister();t.userGet().then(function(t){n.teams=t.data.ListOfTeams})})};n.updateUser=function(n){t.employeeUpdate(n)};n.updateTeam=function(n){t.teamUpdate(n)};n.userSetRole=function(i,r){t.userSetRole(i,r).then(function(){t.userGet().then(function(t){n.data=t.data.ListOfCalendarViewModels})})};n.teamSetEmployee=function(i,r){t.teamSetEmployee(i,r).then(function(){t.userGet().then(function(t){n.data=t.data.ListOfCalendarViewModels})})};n.init()};ManagementController.$inject=["$scope","dataService"];